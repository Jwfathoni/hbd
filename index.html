<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Special Day: Silvia Mona Fitri</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&display=swap" rel="stylesheet">
    <style>
        /* === BASE SETTINGS === */
        :root {
            --primary: #ff6b6b;
            --accent: #feca57;
            --bg-dark: #0f2027;
            --bg-mid: #203a43;
            --bg-light: #2c5364;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(to bottom, var(--bg-dark), var(--bg-mid), var(--bg-light));
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            color: white;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* === BACKGROUND STARS === */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite ease-in-out;
            opacity: 0.8;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* === GIFT BOX CONTAINER (INTRO) === */
        .gift-container {
            z-index: 10;
            text-align: center;
            transition: opacity 1s, transform 1s;
            cursor: pointer;
        }

        .gift-container.opened {
            opacity: 0;
            transform: scale(2);
            pointer-events: none;
        }

        .instruction {
            margin-top: 20px;
            font-size: 0.9rem;
            letter-spacing: 2px;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        /* CSS PURE 3D BOX */
        .box {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
            animation: float 3s ease-in-out infinite;
            transform-style: preserve-3d;
        }

        .box-body {
            width: 100%; height: 100%;
            background: var(--primary);
            border-radius: 10px;
            position: relative;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .box-lid {
            width: 110%; height: 25%;
            background: #ff5252;
            position: absolute;
            top: -10%; left: -5%;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .box-ribbon {
            position: absolute;
            background: var(--accent);
        }
        
        /* Ribbon Vertical */
        .ribbon-v { width: 20px; height: 100%; left: 50%; transform: translateX(-50%); top: 0; }
        /* Ribbon Horizontal on Lid */
        .ribbon-h { width: 100%; height: 20px; top: 50%; transform: translateY(-50%); left: 0; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

        /* === MAIN CONTENT (HIDDEN INITIALLY) === */
        .main-content {
            position: absolute;
            top: 0; left: 0; width: 100%; min-height: 100vh;
            z-index: 5;
            display: none; /* Hidden */
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            opacity: 0;
            transition: opacity 2s;
        }

        .main-content.visible {
            display: flex;
            opacity: 1;
        }

        /* Headers */
        .title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
            color: var(--accent);
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 40px;
            letter-spacing: 3px;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding-bottom: 10px;
        }

        /* Polaroid Gallery Grid */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 800px;
            margin-bottom: 40px;
        }

        .photo-card {
            background: white;
            padding: 10px 10px 30px 10px; /* Style Polaroid */
            border-radius: 2px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: rotate(var(--rot));
            transition: transform 0.3s, z-index 0.3s;
            cursor: pointer;
            opacity: 0;
            animation: popIn 0.5s forwards;
            animation-delay: var(--delay);
        }

        .photo-card:hover {
            transform: scale(1.2) rotate(0deg);
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .photo-card img {
            width: 100%;
            height: auto;
            aspect-ratio: 1/1; /* Kotak */
            object-fit: cover;
            filter: sepia(20%);
        }

        @keyframes popIn {
            from { transform: scale(0) rotate(0deg); opacity: 0; }
            to { transform: scale(1) rotate(var(--rot)); opacity: 1; }
        }

        /* Letter / Message */
        .letter-container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 200px;
        }

        .typewriter {
            font-size: 1rem;
            line-height: 1.8;
            text-align: left;
        }

        /* Footer */
        .footer {
            margin-top: 50px;
            font-size: 0.8rem;
            opacity: 0.6;
        }

        /* Confetti Effect */
        .confetti {
            position: fixed;
            width: 10px; height: 10px;
            background-color: var(--color);
            top: 50%; left: 50%;
            z-index: 100;
            border-radius: 50%;
        }

        /* Responsiveness */
        @media (min-width: 768px) {
            .title { font-size: 5rem; }
            .gallery { grid-template-columns: repeat(4, 1fr); gap: 30px; }
            .photo-card { padding: 15px 15px 40px 15px; }
            .typewriter { font-size: 1.2rem; text-align: center; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="musik.mp3" type="audio/mpeg">
    </audio>

    <div class="stars" id="starsContainer"></div>

    <div class="gift-container" id="giftBox" onclick="openGift()">
        <div class="box">
            <div class="box-lid">
                <div class="box-ribbon ribbon-v"></div>
                <div class="box-ribbon ribbon-h"></div>
            </div>
            <div class="box-body">
                <div class="box-ribbon ribbon-v"></div>
            </div>
        </div>
        <div class="instruction">Ketuk kado untuk membuka</div>
    </div>

    <div class="main-content" id="mainContent">
        <h1 class="title">Happy Birthday</h1>
        <div class="subtitle">Silvia Mona Fitri</div>

        <div class="gallery">
            <div class="photo-card" style="--rot:-5deg; --delay:0.5s">
                <img src="foto/f1.jpg" onerror="this.src='https://via.placeholder.com/300/ff7675/fff?text=Memory+1'">
            </div>
            <div class="photo-card" style="--rot:3deg; --delay:0.8s">
                <img src="foto/f2.jpg" onerror="this.src='https://via.placeholder.com/300/74b9ff/fff?text=Memory+2'">
            </div>
            <div class="photo-card" style="--rot:-2deg; --delay:1.1s">
                <img src="foto/f3.jpg" onerror="this.src='https://via.placeholder.com/300/55efc4/fff?text=Memory+3'">
            </div>
            <div class="photo-card" style="--rot:4deg; --delay:1.4s">
                <img src="foto/f4.jpg" onerror="this.src='https://via.placeholder.com/300/a29bfe/fff?text=Memory+4'">
            </div>
        </div>

        <div class="letter-container">
            <div class="typewriter" id="typingText"></div>
        </div>

        <div class="footer">
            From Joni, with ‚ù§Ô∏è
        </div>
    </div>

    <script>
        // === CONFIGURATION ===
        const message = "Hi Silvia, selamat ulang tahun! üéâ\n\nDi hari spesialmu ini, aku cuma mau bilang terima kasih sudah menjadi bagian cerita yang indah. Semoga harimu selalu dipenuhi tawa, kebahagiaan, dan semua impianmu tercapai. \n\nKeep shining like the stars! ‚ú®\n\n- Joni";
        
        // === LOGIC ===

        // 1. Generate Stars Background
        function createStars() {
            const container = document.getElementById('starsContainer');
            const count = 100; // Jumlah bintang
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const xy = Math.random() * 100;
                const duration = Math.random() * 3 + 2; // 2s - 5s
                const size = Math.random() * 2 + 1;
                
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.setProperty('--duration', duration + 's');
                
                container.appendChild(star);
            }
        }

        // 2. Open Gift Function
        function openGift() {
            const giftBox = document.getElementById('giftBox');
            const mainContent = document.getElementById('mainContent');
            const audio = document.getElementById('bgMusic');

            // Play Music (Harus dipicu interaksi user agar browser tidak blokir)
            audio.play().catch(e => console.log("Audio play failed: ", e));

            // Animasi Gift Box
            giftBox.classList.add('opened');

            // Efek Ledakan Confetti
            createExplosion(window.innerWidth / 2, window.innerHeight / 2);

            // Tampilkan konten utama setelah jeda singkat
            setTimeout(() => {
                giftBox.style.display = 'none';
                mainContent.classList.add('visible');
                startTyping(); // Mulai mengetik pesan
            }, 800);
        }

        // 3. Typing Effect
        function startTyping() {
            const element = document.getElementById('typingText');
            let i = 0;
            element.innerHTML = ""; // Reset
            
            function type() {
                if (i < message.length) {
                    // Handle new lines
                    if (message.charAt(i) === '\n') {
                        element.innerHTML += '<br>';
                    } else {
                        element.innerHTML += message.charAt(i);
                    }
                    i++;
                    setTimeout(type, 50); // Kecepatan mengetik (ms)
                }
            }
            // Delay sedikit agar foto muncul duluan
            setTimeout(type, 1500); 
        }

        // 4. Confetti Explosion Logic
        function createExplosion(x, y) {
            const colors = ['#ff6b6b', '#feca57', '#54a0ff', '#5f27cd', '#ff9ff3'];
            for (let i = 0; i < 60; i++) {
                const particle = document.createElement('div');
                particle.classList.add('confetti');
                document.body.appendChild(particle);

                // Posisi awal
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);

                // Gerakan acak
                const destinationX = (Math.random() - 0.5) * 500;
                const destinationY = (Math.random() - 0.5) * 500;
                const rotation = Math.random() * 520;

                const animation = particle.animate([
                    { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${destinationX}px, ${destinationY}px) rotate(${rotation}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 1000,
                    easing: 'cubic-bezier(0, .9, .57, 1)',
                    delay: Math.random() * 200
                });

                animation.onfinish = () => particle.remove();
            }
        }

        // Initialize stars on load
        window.onload = createStars;

    </script>
</body>
</html>
